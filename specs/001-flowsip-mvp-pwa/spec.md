# 功能規格：FlowSip 喝水提醒與番茄鐘 MVP

**功能分支**: `001-flowsip-mvp-pwa`  
**建立日期**: 2025-09-10  
**狀態**: 草稿  
**輸入描述**: FlowSip 喝水提醒與番茄鐘 MVP - 一個可安裝的極簡計時器，幫助用戶規律喝水、專注工作，支援離線使用的 PWA 應用程式

## 執行流程 (main)
```
1. 解析用戶需求描述
   → 產品定位：極簡計時器，喝水提醒+番茄鐘，PWA 應用
2. 提取關鍵概念
   → 用戶：上班族、學生、工程師
   → 行為：計時、提醒、記錄、設定
   → 資料：設定、計時記錄、使用統計
   → 限制：7天內 MVP 上線、離線優先、無伺服器
3. 明確性檢查
   → 所有主要功能已明確定義
4. 填寫用戶情境與測試部分
   → 主要流程：設定計時器→開始→提醒→記錄
5. 產生功能需求
   → 每項需求均可測試
6. 識別關鍵實體
   → 設定、記錄、計時器狀態
7. 檢查清單驗證
   → 成功：規格已準備好進入規劃階段
```

---

## ⚡ 快速指南
- ✅ 專注於用戶需要什麼以及為什麼需要
- ❌ 避免實作細節（不涉及技術堆疊、API、程式碼架構）
- 👥 為業務利害關係人撰寫，非開發人員

---

## 用戶情境與測試 *(必填)*

### 主要用戶故事
作為忙碌的上班族/學生，我需要一個簡單可靠的工具來提醒我定時喝水和管理專注時間，讓我能保持健康和高效的工作狀態，而且這個工具要能離線使用且不占用太多注意力。

### 驗收情境
1. **Given** 用戶首次開啟 FlowSip，**When** 選擇喝水模式並設定 30 分鐘提醒，**Then** 系統開始倒數計時並在時間到時發出通知
2. **Given** 用戶正在使用番茄鐘模式進行 25 分鐘專注，**When** 時間結束，**Then** 系統自動切換到 5 分鐘休息模式並記錄完成的番茄
3. **Given** 用戶授權系統通知，**When** 分頁被切換到背景 30 分鐘後，**Then** 用戶收到系統通知提醒喝水
4. **Given** 用戶在離線狀態下，**When** 開啟已安裝的 FlowSip PWA，**Then** 應用程式正常載入並顯示上次的設定
5. **Given** 用戶完成多次計時，**When** 查看記錄頁面，**Then** 能看到今日累積數據和本週概覽圖表

### 邊界情況
- 當用戶拒絕通知授權時，系統如何處理？→ 使用視覺高亮和音效提醒
- 當分頁在背景運行時，計時器如何保持準確？→ 使用時間戳校正，確保誤差不超過 2 秒
- 當裝置處於省電模式或休眠時？→ 回到頁面時立即同步時間
- 當用戶中斷計時器後再重新開始？→ 根據模式設計決定重置或延續

## 需求 *(必填)*

### 功能需求

#### 核心計時功能
- **FR-001**: 系統必須提供喝水提醒模式，預設每 30 分鐘提醒一次
- **FR-002**: 系統必須提供番茄鐘模式，支援 25 分鐘專注 + 5 分鐘休息週期
- **FR-003**: 系統必須允許用戶自訂計時間隔
- **FR-004**: 系統必須在計時結束時提供多種提醒方式（視覺、音效、系統通知）

#### 背景運行與準確性
- **FR-005**: 系統必須在分頁切換到背景時繼續計時
- **FR-006**: 系統必須在用戶返回頁面時校正計時器，確保時間誤差不超過 2 秒
- **FR-007**: 系統必須使用時間戳而非定時器來確保計時準確性

#### 資料記錄與統計
- **FR-008**: 系統必須記錄每日喝水次數和累積毫升數
- **FR-009**: 系統必須記錄每日完成的番茄鐘數量
- **FR-010**: 系統必須提供本週統計概覽
- **FR-011**: 系統必須支援 CSV 格式匯出記錄資料

#### PWA 與離線功能
- **FR-012**: 系統必須實作為可安裝的 PWA 應用程式
- **FR-013**: 系統必須在離線狀態下正常運作
- **FR-014**: 系統必須在本機儲存所有設定和記錄資料

#### 用戶介面與體驗
- **FR-015**: 系統必須提供極簡的用戶介面，主要操作為單一開始/停止按鈕
- **FR-016**: 系統必須支援行動裝置單手操作
- **FR-017**: 系統必須支援深色/淺色主題切換
- **FR-018**: 系統必須支援音量調節設定

#### 通知與提醒
- **FR-019**: 系統必須在獲得授權後發送系統通知
- **FR-020**: 系統必須在通知被拒絕時提供替代提醒方式
- **FR-021**: 系統必須遵循行動裝置音訊播放政策（首次互動後才能播放音效）

#### 隱私與安全
- **FR-022**: 系統必須僅在本機儲存用戶資料，不上傳到伺服器
- **FR-023**: 系統必須提供一鍵清除所有資料的功能
- **FR-024**: 系統必須在設定頁面明確說明隱私政策

### 非功能需求
- **NFR-001**: 系統必須在 1 秒內回應用戶的開始計時操作
- **NFR-002**: 系統必須達到 PWA 安裝率 ≥ 12%（相對於獨立訪客）
- **NFR-003**: 系統必須達到次日回訪率 ≥ 25%，週回訪率 ≥ 20%
- **NFR-004**: 系統必須支援用戶每日平均完成 ≥ 2 次番茄鐘或 ≥ 4 次喝水提醒

### 關鍵實體 *(包含資料相關功能)*
- **計時器狀態**: 包含模式（喝水/番茄）、剩餘時間、運行狀態、開始時間戳
- **用戶設定**: 包含提醒間隔、音量、主題偏好、通知授權狀態
- **活動記錄**: 包含日期、類型、完成狀態、開始時間、結束時間、水量或番茄數
- **統計資料**: 包含每日/週累積數據、完成率、使用模式分析

---

## 範圍界定

### MVP 包含功能
- 喝水提醒模式（30 分鐘固定間隔）
- 番茄鐘模式（25/5 分鐘週期）
- 基本自訂間隔設定
- 多重提醒方式（視覺/音效/通知）
- 每日記錄與週統計
- CSV 匯出功能
- PWA 安裝與離線支援
- 基本設定（音量/主題）

### 未來版本功能
- 自訂喝水快速加量按鈕
- 用戶引導教學
- 進階統計圖表
- 更多主題選擇

### 明確排除功能
- 用戶帳號與登入系統
- 雲端同步功能
- 推播伺服器
- 付費訂閱方案
- 社群功能與排行榜
- 多裝置同步

---

## 檢查與驗收清單

### 內容品質
- [x] 無實作細節（程式語言、框架、API）
- [x] 專注於用戶價值和業務需求
- [x] 為非技術利害關係人撰寫
- [x] 所有必填部分已完成

### 需求完整性
- [x] 無 [需要澄清] 標記
- [x] 需求可測試且明確
- [x] 成功標準可量測
- [x] 範圍界定清楚
- [x] 相依性和假設已識別

---

## 執行狀態

- [x] 用戶描述已解析
- [x] 關鍵概念已提取
- [x] 模糊性已標記
- [x] 用戶情境已定義
- [x] 需求已產生
- [x] 實體已識別
- [x] 檢查清單已通過

---

## 語言規範
本專案及後續所有相關文件均使用**正體中文**撰寫，包括：

### 專案文件
- 所有規格文件和技術文件
- 任務清單和進度記錄  
- 程式碼註解與說明
- README 和開發指南
- Git 提交訊息和 PR 描述

### 應用程式內容
- 使用者介面文案
- 錯誤訊息和提示
- 系統通知內容
- 匯出資料標題和欄位名稱
- 幫助文字和工具提示

### 溝通協作
- **所有開發過程中的回答和討論**
- 程式碼審查意見
- 問題回報和解決方案
- 會議記錄和決策文件

**重要原則**：
- 使用台灣慣用的正體中文用詞
- 技術術語優先使用中文，必要時括號標註英文
- 維持專業性和一致性
- 確保用戶體驗的在地化需求

此規範適用於所有參與者和 AI 助理，確保專案溝通和文件的語言一致性。